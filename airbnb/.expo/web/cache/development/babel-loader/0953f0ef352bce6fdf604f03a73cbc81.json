{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stian\\\\Documents\\\\react-native-airbnb-clone-master\\\\airbnb\\\\app\\\\screens\\\\MessageDetail.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  /* background-color: darkturquoise; */\\n  width: 80%;\\n  height: 40px;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: space-between;\\n  align-self: center;\\n  border: 1px solid \", \";\\n  border-radius: 50px;\\n  padding: 0 20px;\\n  margin: 10px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  /* background-color: lightslategray; */\\n  flex: 1;\\n  justify-content: flex-end;\\n  width: 100%;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  background-color: white;\\n  flex: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport io from \"socket.io-client\";\nimport moment from \"moment\";\nimport { MessageItem } from \"../components/MessageItem\";\nimport styled from \"styled-components\";\nimport colors from \"../config/colors\";\nimport { Feather } from \"@expo/vector-icons\";\nvar keyboardVerticalOffset = Platform.OS === \"ios\" ? 100 : -150;\n\nvar MessageDetail = function MessageDetail() {\n  var _useState = useState({\n    user_id: 1,\n    createdAt: new Date(),\n    msg: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messageList = _useState4[0],\n      setMessageList = _useState4[1];\n\n  var socket = useRef(null);\n  var flat = useRef();\n  useEffect(function () {\n    socket.current = io(\"http://192.168.1.39:3001\");\n    socket.current.on(\"message\", function (message) {\n      setMessageList(function (prevState) {\n        return [].concat(_toConsumableArray(prevState), [message]);\n      });\n    });\n  }, []);\n\n  var handleChange = function handleChange(text) {\n    var newMessage = _objectSpread({}, message);\n\n    var date = moment().format(\"MMMM D YYYY, h:mm a\");\n    newMessage = {\n      user_id: 1,\n      createdAt: date,\n      msg: text\n    };\n    setMessage(newMessage);\n  };\n\n  var sendMessage = function sendMessage() {\n    socket.current.emit(\"message\", message);\n    setMessageList(function (prevState) {\n      return [].concat(_toConsumableArray(prevState), [message]);\n    });\n    console.log(messageList);\n    setMessage(\"\");\n    Keyboard.dismiss();\n  };\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, React.createElement(KeyboardAvoidingView, {\n    style: {\n      flex: 1\n    },\n    behavior: \"padding\",\n    keyboardVerticalOffset: keyboardVerticalOffset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, React.createElement(MessageArea, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    ref: flat,\n    onContentSizeChange: function onContentSizeChange() {\n      return flat.current.scrollToEnd({\n        animated: true\n      });\n    },\n    onLayout: function onLayout() {\n      return flat.current.scrollToEnd({\n        animated: true\n      });\n    },\n    data: messageList,\n    keyExtractor: function keyExtractor(item, index) {\n      return \"key\" + index;\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(MessageItem, {\n        id: item.user_id,\n        title: item.createdAt,\n        subtitle: item.msg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  })), React.createElement(InputArea, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    placeholder: \"\\uBA54\\uC138\\uC9C0 \\uC791\\uC131\\uD558\\uAE30\",\n    value: message.msg,\n    onChangeText: function onChangeText(text) {\n      return handleChange(text);\n    },\n    onSubmitEditing: sendMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: sendMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, React.createElement(Feather, {\n    name: \"arrow-up-circle\",\n    size: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  })))));\n};\n\nvar Container = styled.View(_templateObject());\nvar MessageArea = styled.View(_templateObject2());\nvar InputArea = styled.View(_templateObject3(), colors.lightgray);\nexport default MessageDetail;","map":{"version":3,"sources":["C:/Users/Stian/Documents/react-native-airbnb-clone-master/airbnb/app/screens/MessageDetail.js"],"names":["React","useEffect","useState","useRef","io","moment","MessageItem","styled","colors","Feather","keyboardVerticalOffset","Platform","OS","MessageDetail","user_id","createdAt","Date","msg","message","setMessage","messageList","setMessageList","socket","flat","current","on","prevState","handleChange","text","newMessage","date","format","sendMessage","emit","console","log","Keyboard","dismiss","flex","scrollToEnd","animated","item","index","Container","View","MessageArea","InputArea","lightgray"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\n\nimport {\n  FlatList,\n  TouchableOpacity,\n  KeyboardAvoidingView,\n  Keyboard,\n  Platform,\n  Text,\n  TextInput,\n} from \"react-native\";\nimport io from \"socket.io-client\";\nimport moment from \"moment\";\n\n//import components\nimport { MessageItem } from \"../components/MessageItem\";\n\n//import styles and assets\nimport styled from \"styled-components\";\nimport colors from \"../config/colors\";\nimport { Feather } from \"@expo/vector-icons\";\n\nconst keyboardVerticalOffset = Platform.OS === \"ios\" ? 100 : -150;\n\nconst MessageDetail = () => {\n  const [message, setMessage] = useState({\n    user_id: 1,\n    createdAt: new Date(),\n    msg: \"\",\n  });\n  const [messageList, setMessageList] = useState([]);\n  const socket = useRef(null);\n  const flat = useRef();\n\n  useEffect(() => {\n    socket.current = io(\"http://192.168.1.39:3001\");\n    socket.current.on(\"message\", (message) => {\n      setMessageList((prevState) => [...prevState, message]);\n    });\n  }, []);\n\n  const handleChange = (text) => {\n    let newMessage = { ...message };\n    let date = moment().format(\"MMMM D YYYY, h:mm a\");\n    newMessage = { user_id: 1, createdAt: date, msg: text };\n    setMessage(newMessage);\n  };\n\n  const sendMessage = () => {\n    socket.current.emit(\"message\", message);\n    setMessageList((prevState) => [...prevState, message]);\n    console.log(messageList);\n    setMessage(\"\");\n    Keyboard.dismiss();\n  };\n\n  return (\n    <Container>\n      <KeyboardAvoidingView\n        style={{ flex: 1 }}\n        behavior=\"padding\"\n        keyboardVerticalOffset={keyboardVerticalOffset}\n      >\n        <MessageArea>\n          <FlatList\n            ref={flat}\n            onContentSizeChange={() =>\n              flat.current.scrollToEnd({ animated: true })\n            }\n            onLayout={() => flat.current.scrollToEnd({ animated: true })}\n            data={messageList}\n            keyExtractor={(item, index) => \"key\" + index}\n            renderItem={({ item }) => (\n              <MessageItem\n                id={item.user_id}\n                title={item.createdAt}\n                subtitle={item.msg}\n              />\n            )}\n          />\n        </MessageArea>\n\n        <InputArea>\n          <TextInput\n            placeholder=\"메세지 작성하기\"\n            value={message.msg}\n            onChangeText={(text) => handleChange(text)}\n            onSubmitEditing={sendMessage}\n          />\n          <TouchableOpacity onPress={sendMessage}>\n            <Feather name=\"arrow-up-circle\" size={20} />\n          </TouchableOpacity>\n        </InputArea>\n      </KeyboardAvoidingView>\n    </Container>\n  );\n};\n\nconst Container = styled.View`\n  background-color: white;\n  flex: 1;\n`;\n\nconst MessageArea = styled.View`\n  /* background-color: lightslategray; */\n  flex: 1;\n  justify-content: flex-end;\n  width: 100%;\n`;\n\nconst InputArea = styled.View`\n  /* background-color: darkturquoise; */\n  width: 80%;\n  height: 40px;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  align-self: center;\n  border: 1px solid ${colors.lightgray};\n  border-radius: 50px;\n  padding: 0 20px;\n  margin: 10px;\n`;\n\nexport default MessageDetail;\n"]},"metadata":{},"sourceType":"module"}